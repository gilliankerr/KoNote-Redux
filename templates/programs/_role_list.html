{% load i18n %}
{% if roles %}
<figure>
<table role="grid">
    <thead>
        <tr>
            <th scope="col">{% trans "User" %}</th>
            <th scope="col">{% trans "Role" %}</th>
            <th scope="col">{% trans "Status" %}</th>
            {% if is_admin %}<th scope="col"></th>{% endif %}
        </tr>
    </thead>
    <tbody>
        {% for role in roles %}
        <tr>
            <td>{{ role.user.display_name }}</td>
            <td>
                {% if role.role == "program_manager" %}
                    <span class="badge badge-info">{% trans "Program Manager" %}</span>
                {% elif role.role == "receptionist" %}
                    <span class="badge badge-neutral">{% trans "Receptionist" %}</span>
                {% else %}
                    <span class="badge badge-neutral">{% trans "Counsellor" %}</span>
                {% endif %}
            </td>
            <td>
                {% if role.status == "active" %}
                    <span class="badge badge-success">{% trans "Active" %}</span>
                {% else %}
                    <span class="badge badge-danger">{% trans "Removed" %}</span>
                {% endif %}
            </td>
            {% if is_admin %}
            <td>
                {% if role.status == "active" %}
                <button hx-post="{% url 'programs:program_remove_role' program_id=program.pk role_id=role.pk %}"
                        hx-target="#role-list"
                        hx-swap="innerHTML"
                        hx-confirm="{% blocktrans with name=role.user.display_name %}Remove {{ name }} from this program?{% endblocktrans %}"
                        class="outline secondary"
                        style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">
                    {% trans "Remove" %}
                </button>
                {% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
</figure>
{% else %}
<div class="empty-state">
    <p>{% trans "No staff assigned yet." %}</p>
</div>
{% endif %}
