{% extends "base.html" %}

{% block title %}Create Invite â€” {{ site.product_name|default:"KoNote" }}{% endblock %}

{% block content %}
<hgroup>
    <h1>Create Invite</h1>
    <p>Generate a link for a new user to create their account</p>
</hgroup>

<article>
    <form method="post">
        {% csrf_token %}

        <label for="id_role">Role</label>
        {{ form.role }}
        {% if form.role.errors %}<small class="error" role="alert">{{ form.role.errors.0 }}</small>{% endif %}

        <fieldset id="programs-fieldset">
            <legend>Assign to Programs</legend>
            <small>{{ form.programs.help_text }}</small>
            {{ form.programs }}
            {% if form.programs.errors %}<small class="error" role="alert">{{ form.programs.errors.0 }}</small>{% endif %}
        </fieldset>

        <label for="id_expires_days">Link expires in (days)</label>
        {{ form.expires_days }}
        {% if form.expires_days.errors %}<small class="error" role="alert">{{ form.expires_days.errors.0 }}</small>{% endif %}

        <button type="submit">Create Invite</button>
    </form>
</article>

<script>
// Hide program selection when "admin" role is chosen
document.addEventListener("DOMContentLoaded", function() {
    var roleSelect = document.getElementById("id_role");
    var programsFieldset = document.getElementById("programs-fieldset");
    function togglePrograms() {
        programsFieldset.style.display = roleSelect.value === "admin" ? "none" : "";
    }
    roleSelect.addEventListener("change", togglePrograms);
    togglePrograms();
});
</script>
{% endblock %}
