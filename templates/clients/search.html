{% extends "base.html" %}
{% load i18n %}

{% block title %}{% blocktrans with clients=term.client_plural|default:"Participants" %}Search {{ clients }}{% endblocktrans %} â€” {{ site.product_name|default:"KoNote" }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% blocktrans with clients=term.client_plural|default:"Participants" %}Search {{ clients }}{% endblocktrans %}</h1>
</div>

<!-- Search bar -->
<form id="search-filters" role="search" method="get" action="{% url 'clients:client_search' %}">
    <div class="filter-field--search">
        <label for="client-search" class="visually-hidden">{% blocktrans with clients=term.client_plural|default:"participants" %}Search {{ clients }}{% endblocktrans %}</label>
        <input type="search"
               id="client-search"
               name="q"
               placeholder="{% trans 'Search by name, ID, or note content...' %}"
               value="{{ query }}"
               aria-label="{% blocktrans with clients=term.client_plural|default:'participants' %}Search {{ clients }}{% endblocktrans %}"
               hx-get="{% url 'clients:client_search' %}"
               hx-trigger="input changed delay:300ms"
               hx-target="#search-results-container"
               hx-include="#search-filters"
               hx-indicator="#loading-bar">
    </div>
</form>

<!-- Search results container (updated via HTMX) -->
<div id="search-results-container" aria-live="polite">
    {% include "clients/_search_results.html" %}
</div>

<p><a href="{% url 'clients:client_list' %}">{% blocktrans with clients=term.client_plural|default:"Participants" %}&larr; Back to {{ clients }} list{% endblocktrans %}</a></p>
{% endblock %}
