{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Custom Fields" %} â€” {{ site.product_name|default:"KoNote2" }}{% endblock %}

{% block content %}
<hgroup>
    <h1>{% trans "Custom Fields" %}</h1>
    <p>{% blocktrans with client=term.client|default:"participant" %}Define additional fields for {{ client }} files.{% endblocktrans %}</p>
</hgroup>

<div role="group">
    <a href="{% url 'clients:custom_field_group_create' %}" role="button">{% trans "New Group" %}</a>
    <a href="{% url 'clients:custom_field_def_create' %}" role="button" class="outline">{% trans "New Field" %}</a>
</div>

{% if groups %}
{% for group in groups %}
<article>
    <header>
        <strong>{{ group.title }}</strong>
        {% if group.status == "archived" %}<span class="badge badge-neutral">{% trans "Archived" %}</span>{% endif %}
        <span style="float: right;">
            <a href="{% url 'clients:custom_field_group_edit' group_id=group.pk %}">{% trans "Edit Group" %}</a>
        </span>
    </header>
    {% if group.fields.all %}
    <table role="grid" aria-label="{{ group.title }} {% trans 'custom fields' %}">
        <thead>
            <tr>
                <th scope="col">{% trans "Field" %}</th>
                <th scope="col">{% trans "Type" %}</th>
                <th scope="col">{% trans "Required" %}</th>
                <th scope="col">{% trans "Sensitive" %}</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            {% for field in group.fields.all %}
            <tr>
                <td>{{ field.name }}</td>
                <td>{{ field.get_input_type_display }}</td>
                <td>{% if field.is_required %}{% trans "Yes" %}{% else %}{% trans "No" %}{% endif %}</td>
                <td>{% if field.is_sensitive %}{% trans "Yes" %}{% else %}{% trans "No" %}{% endif %}</td>
                <td><a href="{% url 'clients:custom_field_def_edit' field_id=field.pk %}">{% trans "Edit" %}</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="empty-state">{% trans "No fields in this group yet." %}</p>
    {% endif %}
</article>
{% endfor %}
{% else %}
<div class="empty-state">
    <p>{% trans "No custom field groups defined yet." %}</p>
</div>
{% endif %}
{% endblock %}
