{% load i18n %}
{# Partial: Read-only display of consent status with record button #}
{% if client.consent_given_at %}
{# Compact display when consent exists - shown inside a details element #}
<dl class="quick-info">
    <div class="quick-info-item">
        <dt>{% trans "Type" %}</dt>
        <dd>{{ client.consent_type|default:"â€”" }}</dd>
    </div>
    <div class="quick-info-item">
        <dt>{% trans "Recorded" %}</dt>
        <dd>{{ client.consent_given_at|date:"Y-m-d" }}</dd>
    </div>
    {% if not is_receptionist %}
    <div class="quick-info-item">
        <dd>
            <button type="button"
                    class="outline secondary"
                    style="padding: var(--kn-space-xs) var(--kn-space-sm); font-size: 0.75rem; margin: 0;"
                    hx-get="{% url 'clients:client_consent_edit' client_id=client.pk %}"
                    hx-target="#consent-section"
                    hx-swap="innerHTML"
                    aria-label="{% trans 'Update consent record' %}">
                {% trans "Update" %}
            </button>
        </dd>
    </div>
    {% endif %}
</dl>
{% else %}
{# Warning display when consent is missing #}
<div class="consent-warning">
    <p class="notice warning" role="alert">
        <strong>{% trans "No consent on file." %}</strong>
        {% trans "Consent must be recorded before progress notes can be created for this" %} {{ term.client|default:"participant" }}.
    </p>
    {% if not is_receptionist %}
    <button type="button"
            class="outline"
            hx-get="{% url 'clients:client_consent_edit' client_id=client.pk %}"
            hx-target="#consent-section"
            hx-swap="innerHTML"
            aria-label="{% trans 'Record consent' %}">
        {% trans "Record Consent" %}
    </button>
    {% endif %}
</div>
{% endif %}
