{% load i18n %}
<td>
    <strong>{{ target.name }}</strong>
    {% if target.description %}
    <br><small>{{ target.description|truncatewords:20 }}</small>
    {% endif %}
</td>
<td>
    {% if target.status == "default" %}
        <span class="badge badge-success">{% trans "Active" %}</span>
    {% elif target.status == "completed" %}
        <span class="badge badge-info">{% trans "Completed" %}</span>
    {% else %}
        <span class="badge badge-neutral">{% trans "Deactivated" %}</span>
    {% endif %}
</td>
<td>
    {% for metric in target.metrics.all %}
        <span class="badge badge-neutral" title="{{ metric.definition|truncatewords:10 }}">{{ metric.name }}</span>
    {% empty %}
        <small class="secondary">{% trans "None" %}</small>
    {% endfor %}
</td>
{% if can_edit %}
<td>
    <div role="group">
        <a href="{% url 'plans:target_edit' target_id=target.pk %}" class="outline small" role="button" aria-label="{% blocktrans with name=target.name %}Edit {{ name }}{% endblocktrans %}">{% trans "Edit" %}</a>
        <button class="outline small secondary"
                hx-get="{% url 'plans:target_status' target_id=target.pk %}"
                hx-target="#target-{{ target.pk }}"
                hx-swap="innerHTML"
                hx-confirm="{% trans 'Change the status of this target?' %}"
                aria-label="{% blocktrans with name=target.name %}Change status of {{ name }}{% endblocktrans %}">
            {% trans "Status" %}
        </button>
        <a href="{% url 'plans:target_metrics' target_id=target.pk %}" class="outline small secondary" role="button" aria-label="{% blocktrans with name=target.name %}Manage metrics for {{ name }}{% endblocktrans %}">{{ term.metric_plural|default:"Metrics" }}</a>
        <a href="{% url 'plans:target_history' target_id=target.pk %}" class="outline small secondary" role="button" aria-label="{% blocktrans with name=target.name %}View history of {{ name }}{% endblocktrans %}">{% trans "History" %}</a>
    </div>
</td>
{% endif %}
