{% extends "portal/base_portal.html" %}
{% load i18n %}

{% block title %}{% trans "Reset Password" %}{% endblock %}

{# No quick-exit on password reset â€” no sensitive data visible #}
{% block quick_exit %}{% endblock %}

{% block content %}
<article class="portal-login-card">
    <header>
        <h1>{% trans "Reset Your Password" %}</h1>
        <p>{% trans "Enter your email address and we'll send you a code to reset your password." %}</p>
    </header>

    {% if success %}
    <p role="status" class="portal-alert portal-alert-success">
        {% trans "If we found your account, you'll receive a code at your email address." %}
    </p>
    <p>{% trans "Check your email and then use the code to set a new password." %}</p>
    <p>
        <a href="{% url 'portal:password_reset_confirm' %}" role="button">{% trans "I have my code" %}</a>
    </p>
    {% else %}

    {% if error %}
    <p role="alert" class="portal-alert portal-alert-error">{{ error }}</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <label for="email">{% trans "Email" %}</label>
        <input type="email" id="email" name="email"
               value="{{ form.email.value|default:'' }}"
               required autofocus
               autocomplete="email"
               aria-describedby="email-help">
        <small id="email-help">{% trans "The email address you used when you created your account." %}</small>
        {% if form.email.errors %}
        <small role="alert" class="portal-field-error">{{ form.email.errors.0 }}</small>
        {% endif %}

        <button type="submit">{% trans "Send me a code" %}</button>
    </form>
    {% endif %}

    <p>
        <a href="{% url 'portal:login' %}">&larr; {% trans "Back to sign in" %}</a>
    </p>
</article>
{% endblock %}
