{% extends "portal/base_portal.html" %}
{% load i18n %}

{% block title %}{% trans "Change Password" %}{% endblock %}

{% block content %}
<h1>{% trans "Change Your Password" %}</h1>
<p>{% trans "Use a strong password to keep your account safe. Choose at least 8 characters with a mix of letters and numbers." %}</p>

{% if success %}
<p role="status" class="portal-alert portal-alert-success">
    {% trans "Your password has been changed." %}
</p>
{% endif %}

{% if error %}
<p role="alert" class="portal-alert portal-alert-error">{{ error }}</p>
{% endif %}

<form method="post">
    {% csrf_token %}

    <label for="current-password">{% trans "Current password" %}</label>
    <input type="password" id="current-password" name="current_password"
           required autofocus
           autocomplete="current-password"
           aria-describedby="current-password-help">
    <small id="current-password-help">{% trans "Enter the password you use now." %}</small>
    {% if form.current_password.errors %}
    <small role="alert" class="portal-field-error">{{ form.current_password.errors.0 }}</small>
    {% endif %}

    <label for="new-password">{% trans "New password" %}</label>
    <input type="password" id="new-password" name="new_password"
           required
           autocomplete="new-password"
           aria-describedby="new-password-help">
    <small id="new-password-help">{% trans "Choose a new password. Use at least 8 characters." %}</small>
    {% if form.new_password.errors %}
    <small role="alert" class="portal-field-error">{{ form.new_password.errors.0 }}</small>
    {% endif %}

    <label for="new-password-confirm">{% trans "Confirm new password" %}</label>
    <input type="password" id="new-password-confirm" name="new_password_confirm"
           required
           autocomplete="new-password"
           aria-describedby="new-password-confirm-help">
    <small id="new-password-confirm-help">{% trans "Type your new password again to make sure it's right." %}</small>
    {% if form.new_password_confirm.errors %}
    <small role="alert" class="portal-field-error">{{ form.new_password_confirm.errors.0 }}</small>
    {% endif %}

    <button type="submit">{% trans "Change my password" %}</button>
</form>

<p>
    <a href="{% url 'portal:settings' %}">&larr; {% trans "Back to Settings" %}</a>
</p>
{% endblock %}
